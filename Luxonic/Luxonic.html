<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,
initial-scale=1.0">
<title>Reproductor de Música Luxonic</title>
<link
href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&
display=swap" rel="stylesheet">
<style>
:root {
--primary-bg: #212b3e;
--secondary-bg: #1c2636;
--accent-color: #f06292;
--light-accent: #f48fb1;
--text-primary: #ffffff;
--text-secondary: #a3a3b3;
--dark-bg: #111a24;
}
body {
font-family: 'Inter', sans-serif;
background-color: var(--primary-bg);
color: var(--text-primary);
margin: 0;
padding: 0;
display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
overflow: hidden;
transition: background-color 0.5s ease;
}
.container {
width: 95%;
max-width: 400px;
height: 95vh;
max-height: 800px;
background-color: var(--secondary-bg);
border-radius: 20px;
padding: 24px;
display: flex;
flex-direction: column;
gap: 20px;
box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
position: relative;
overflow: hidden;
border: 1px solid rgba(255, 255, 255, 0.1);
transition: background-color 0.5s ease;
}
.header {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px 0;
}
.header h1 {
font-size: 1.2rem;
font-weight: 700;
margin: 0;
}
.header .icon-buttons {
display: flex;
gap: 16px;
}
.header .icon-btn {
background: none;
border: none;
color: var(--text-secondary);
cursor: pointer;
font-size: 1.5rem;
transition: color 0.3s ease;
display: flex;
justify-content: center;
align-items: center;
}
.header .icon-btn:hover {
color: var(--accent-color);
}
.icon-btn svg, .control-btn svg, .nav-btn svg {
width: 24px;
height: 24px;
fill: currentColor;
}
.now-playing {
display: flex;
flex-direction: column;
align-items: center;
text-align: center;
gap: 16px;
}
.album-art-container {
width: 200px;
height: 200px;
position: relative;
}
.album-art {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
border: 4px solid var(--accent-color);
transition: border-color 0.5s ease;
}
.now-playing .title {
font-size: 1.5rem;
font-weight: 700;
margin-bottom: 4px;
}
.now-playing .artist {
font-size: 1rem;
color: var(--text-secondary);
margin: 0;
}
.progress-container {
width: 100%;
margin-top: 10px;
}
.progress-bar {
-webkit-appearance: none;
width: 100%;
height: 6px;
background: rgba(255, 255, 255, 0.1);
border-radius: 5px;
cursor: pointer;
}
.progress-bar::-webkit-slider-thumb {
-webkit-appearance: none;
width: 15px;
height: 15px;
background: var(--accent-color);
border-radius: 50%;
cursor: pointer;
border: 2px solid var(--secondary-bg);
margin-top: -4px;
}
.time-labels {
display: flex;
justify-content: space-between;
font-size: 0.8rem;
color: var(--text-secondary);
margin-top: 4px;
}
.player-controls {
display: flex;
justify-content: center;
align-items: center;
gap: 24px;
margin-top: 16px;
}
.control-btn {
background: none;
border: none;
color: var(--text-primary);
font-size: 2rem;
cursor: pointer;
transition: color 0.3s ease, transform 0.2s ease;
display: flex;
justify-content: center;
align-items: center;
}
.control-btn:hover {
color: var(--accent-color);
transform: scale(1.1);
}
#play-pause-btn {
background-color: var(--accent-color);
color: var(--text-primary);
width: 60px;
height: 60px;
border-radius: 50%;
display: flex;
justify-content: center;
align-items: center;
font-size: 3rem;
transition: background-color 0.5s ease;
}
#play-pause-btn:hover {
transform: scale(1.1);
}
.screen {
display: flex;
flex-direction: column;
gap: 10px;
flex-grow: 1;
overflow-y: auto;
scrollbar-width: none;
-ms-overflow-style: none;
padding-bottom: 20px;
}
.screen::-webkit-scrollbar {
display: none;
}
.screen.hidden {
display: none;
}
.section-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
}
.section-header h2 {
font-size: 1.2rem;
font-weight: 700;
margin: 0;
}
.create-btn, .action-btn-text, .action-btn-close,
.add-folder-btn {
padding: 8px 16px;
border-radius: 20px;
border: none;
background-color: var(--accent-color);
color: var(--text-primary);
font-weight: 500;
cursor: pointer;
transition: background-color 0.5s ease;
}
.create-btn:hover, .action-btn-text:hover,
.action-btn-close:hover, .add-folder-btn:hover {
background-color: var(--light-accent);
}
.song-item, .playlist-item {
display: flex;
align-items: center;
background-color: var(--secondary-bg);
border-radius: 8px;
padding: 8px;
cursor: pointer;
transition: background 0.2s ease, transform 0.2s ease;
}
.song-item:hover, .playlist-item:hover {
background-color: rgba(255, 255, 255, 0.05);
transform: translateY(-2px);
}
.song-item.active {
background-color: rgba(240, 98, 146, 0.2);
border: 1px solid var(--accent-color);
}
.song-item img {
width: 50px;
height: 50px;
border-radius: 8px;
object-fit: cover;
margin-right: 10px;
}
.song-item .info, .playlist-item .info {
flex-grow: 1;
display: flex;
flex-direction: column;
gap: 2px;
margin-left: 10px;
}
.song-item .title, .playlist-item .title {
font-weight: 500;
}
.song-item .artist, .playlist-item .count {
font-size: 0.8rem;
color: var(--text-secondary);
}
.song-item .actions, .playlist-item .actions {
display: flex;
gap: 8px;
}
.song-item .action-btn, .playlist-item .action-btn,
.camera-btn {
background: none;
border: none;
color: var(--text-secondary);
cursor: pointer;
font-size: 1.5rem;
transition: color 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
}
.song-item .action-btn:hover, .playlist-item
.action-btn:hover, .camera-btn:hover {
color: var(--accent-color);
}
.song-item .action-btn svg, .camera-btn svg {
width: 20px;
height: 20px;
}
.file-upload-container {
text-align: center;
padding: 20px;
border: 2px dashed var(--text-secondary);
border-radius: 8px;
cursor: pointer;
transition: background-color 0.3s ease;
}
.file-upload-container:hover {
background-color: rgba(255, 255, 255, 0.05);
}
#file-input, #image-input, #folder-input { display: none; }
.file-upload-container p { margin: 0; color:
var(--text-secondary); }
.modal {
display: none;
position: fixed;
z-index: 100;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0,0,0,0.8);
justify-content: center;
align-items: center;
animation: fadeIn 0.3s ease-out forwards;
}
.modal.show {
display: flex;
}
.modal-content {
background-color: var(--secondary-bg);
padding: 24px;
border-radius: 12px;
width: 90%;
max-width: 400px;
display: flex;
flex-direction: column;
gap: 16px;
position: relative;
transform: scale(0.95);
animation: slideUp 0.3s cubic-bezier(0.175, 0.885, 0.32,
1.275) forwards;
}
.modal-close-btn {
background: none;
border: none;
color: var(--text-secondary);
font-size: 1.5rem;
position: absolute;
top: 10px;
right: 10px;
cursor: pointer;
}
.modal h3 {
margin: 0;
}
.modal input[type="text"] {
padding: 10px;
border-radius: 8px;
border: 1px solid var(--text-secondary);
background-color: var(--primary-bg);
color: var(--text-primary);
}
.modal button {
padding: 10px;
border-radius: 8px;
border: none;
background-color: var(--accent-color);
color: var(--text-primary);
font-weight: 500;
cursor: pointer;
}
.modal-list {
list-style: none;
padding: 0;
margin: 0;
max-height: 200px;
overflow-y: auto;
}
.modal-list li {
padding: 10px;
cursor: pointer;
border-radius: 8px;
transition: background-color 0.2s ease;
}
.modal-list li:hover {
background-color: rgba(255, 255, 255, 0.05);
}
/* Search Modal Specific Styles */
#search-input-container {
display: flex;
gap: 8px;
}
#search-input-container input {
flex-grow: 1;
}
/* Settings Modal Specific Styles */
.settings-section {
display: flex;
flex-direction: column;
gap: 10px;
margin-bottom: 20px;
}
.color-palette {
display: flex;
gap: 10px;
}
.color-swatch {
width: 30px;
height: 30px;
border-radius: 50%;
cursor: pointer;
border: 2px solid transparent;
transition: transform 0.2s ease, border-color 0.2s ease;
}
.color-swatch:hover {
transform: scale(1.1);
}
.color-swatch.active {
border-color: var(--text-primary);
}
.equalizer-controls {
display: flex;
flex-direction: column;
gap: 15px;
}
.eq-band {
display: flex;
flex-direction: column;
align-items: center;
gap: 5px;
}
.eq-band label {
font-size: 0.8rem;
color: var(--text-secondary);
}
.eq-band input[type="range"] {
width: 100%;
-webkit-appearance: none;
height: 8px;
background: rgba(255, 255, 255, 0.1);
border-radius: 5px;
}
.eq-band input[type="range"]::-webkit-slider-thumb {
-webkit-appearance: none;
width: 15px;
height: 15px;
background: var(--accent-color);
border-radius: 50%;
cursor: pointer;
border: 2px solid var(--secondary-bg);
}
.bottom-nav {
display: flex;
justify-content: space-around;
align-items: center;
padding: 10px 0;
background-color: var(--dark-bg);
border-radius: 15px;
}
.nav-btn {
background: none;
border: none;
color: var(--text-secondary);
cursor: pointer;
display: flex;
flex-direction: column;
align-items: center;
font-size: 0.7rem;
gap: 4px;
transition: color 0.3s ease;
}
.nav-btn.active { color: var(--accent-color); }
.nav-btn:hover { color: var(--accent-color); }
.nav-btn svg {
width: 24px;
height: 24px;
fill: currentColor;
}
.song-art-upload-btn {
padding: 10px;
border-radius: 8px;
border: none;
background-color: rgba(255, 255, 255, 0.1);
color: var(--text-primary);
font-weight: 500;
cursor: pointer;
text-align: center;
margin-top: 10px;
}
/* Message Box */
#message-box {
position: fixed;
bottom: 100px;
left: 50%;
transform: translateX(-50%);
background-color: rgba(0, 0, 0, 0.7);
color: white;
padding: 10px 20px;
border-radius: 10px;
z-index: 200;
opacity: 0;
transition: opacity 0.5s ease-in-out;
}
#message-box.show {
opacity: 1;
}
.confirm-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
display: flex;
justify-content: center;
align-items: center;
z-index: 200;
visibility: hidden;
opacity: 0;
transition: visibility 0s, opacity 0.3s;
}
.confirm-modal.show {
visibility: visible;
opacity: 1;
}
.confirm-content {
background-color: var(--secondary-bg);
padding: 20px;
border-radius: 10px;
text-align: center;
}
.confirm-content button {
margin: 0 10px;
}
.scanner-btn {
padding: 10px;
border-radius: 8px;
border: none;
background-color: var(--accent-color);
color: var(--text-primary);
font-weight: 500;
cursor: pointer;
width: 100%;
text-align: center;
}
</style>
</head>
<body>
<div class="container">
<header class="header">
<span style="font-size: 1.2rem; font-weight:
500;">Luxonic</span>
<div class="icon-buttons">
<button class="icon-btn" id="search-btn"
title="Buscar">
<svg viewBox="0 0 24 24" fill="none"
xmlns="http://www.w3.org/2000/svg">
<path d="M15.7955 15.8111L21 21M18 10.5C18
14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786
6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z" stroke="currentColor"
stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
<button class="icon-btn" id="settings-btn"
title="Ajustes">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.0156 16.035C14.2246 16.035
16.0156 14.244 16.0156 12.035C16.0156 9.82603 14.2246 8.03503 12.0156
8.03503C9.80665 8.03503 8.01562 9.82603 8.01562 12.035C8.01562 14.244
9.80665 16.035 12.0156 16.035Z" stroke="currentColor" stroke-width="2"
stroke-linecap="round" stroke-linejoin="round"/>
<path d="M19.3496 12.035H22.0156"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M1.01562 12.035H3.68162"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M17.4336 4.63159L19.3496 2.71559"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M4.68164 19.4526L2.76564 17.5366"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M17.4097 19.4307L19.3257 17.5147"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M4.68164 4.63159L2.76564 2.71559"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M12.0156 3.035V0.369019"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
<path d="M12.0156 21.701V19.035"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round"/>
</svg>
</button>
</div>
</header>
<section class="now-playing">
<div class="album-art-container">
<img id="current-cover"
src="https://placehold.co/200x200/f06292/fff?text=Luxonic"
class="album-art">
</div>
<div class="info">
<div class="title" id="current-song-title">Sin
música</div>
<div class="artist" id="current-song-artist">Sube una
canción para empezar</div>
</div>
<div class="progress-container">
<input type="range" id="progress-bar"
class="progress-bar" value="0" min="0" max="100">
<div class="time-labels">
<span id="current-time">0:00</span>
<span id="duration">0:00</span>
</div>
</div>
<div class="player-controls">
<button class="control-btn" id="prev-btn"
title="Anterior">
<svg viewBox="0 0 24 24" fill="currentColor">
<path d="M16 18L7 12L16 6V18Z" /><path d="M6
6H8V18H6V6Z" />
</svg>
</button>
<button class="control-btn" id="play-pause-btn">
<svg id="play-pause-icon" viewBox="0 0 24 24"
fill="currentColor">
<path d="M8 5V19L19 12L8 5Z"/>
</svg>
</button>
<button class="control-btn" id="next-btn"
title="Siguiente">
<svg viewBox="0 0 24 24" fill="currentColor">
<path d="M8 6L17 12L8 18V6Z" /><path d="M18
6H20V18H18V6Z" />
</svg>
</button>
</div>
</section>
<section id="home-screen" class="screen">
<div class="section-header">
<h2>Tus Canciones</h2>
</div>
<div class="song-list" id="main-song-list">
<p style="text-align: center; color:
var(--text-secondary);">Haz clic en "Escanear Música" en los ajustes
para agregar canciones.</p>
</div>
</section>
<section id="playlists-screen" class="screen hidden">
<div class="section-header">
<h2>Mis Playlists</h2>
<button class="create-btn"
id="create-playlist-btn">Crear nueva</button>
</div>
<div class="playlist-list" id="playlists-list">
<p style="text-align: center; color:
var(--text-secondary);">No hay playlists creadas.</p>
</div>
</section>
<section id="playlist-view-screen" class="screen hidden">
<div class="section-header" style="margin-bottom: 20px;">
<button class="action-btn" id="playlist-view-back-btn"
title="Volver">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M15.41 7.41L14 6L8 12L14 18L15.41
16.59L10.83 12L15.41 7.41Z"/>
</svg>
</button>
<h2 id="playlist-view-title" style="flex-grow: 1;
text-align: center;"></h2>
<button class="action-btn-text"
id="add-songs-to-playlist-btn">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor" style="margin-right: 5px;">
<path d="M19
13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
</svg>
Agregar canciones
</button>
</div>
<div class="song-list" id="playlist-view-song-list">
<p style="text-align: center; color:
var(--text-secondary);">Esta playlist no tiene canciones. Agrega una
para empezar.</p>
</div>
</section>
<!-- Search Modal -->
<div id="search-modal" class="modal">
<div class="modal-content">
<button class="modal-close-btn" id="search-close-btn">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5
6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19
6.41Z"/>
</svg>
</button>
<h3>Buscar Canciones</h3>
<div id="search-input-container">
<input type="text" id="search-input"
placeholder="Buscar por nombre...">
</div>
<div class="song-list" id="search-results-list">
<p style="text-align: center; color:
var(--text-secondary);">Empieza a escribir para buscar.</p>
</div>
</div>
</div>
<!-- Settings Modal -->
<div id="settings-modal" class="modal">
<div class="modal-content">
<button class="modal-close-btn"
id="settings-close-btn">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5
6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19
6.41Z"/>
</svg>
</button>
<h3>Ajustes</h3>
<div class="settings-section">
<h4>Escáner de Almacenamiento</h4>
<button class="scanner-btn"
id="scan-music-btn">Escanear Música</button>
</div>
<div class="settings-section">
<h4>Paleta de Colores</h4>
<div class="color-palette">
<div class="color-swatch active"
data-colors='{"primary":"#212b3e","secondary":"#1c2636","accent":"#f06
292","light":"#f48fb1"}' style="background-color: #f06292;"></div>
<div class="color-swatch"
data-colors='{"primary":"#1a1a1a","secondary":"#000000","accent":"#fff
fff","light":"#e0e0e0"}' style="background-color: #ffffff; border: 1px
solid rgba(255, 255, 255, 0.1);"></div>
<div class="color-swatch"
data-colors='{"primary":"#003366","secondary":"#001f3f","accent":"#87c
eeb","light":"#b0e0e6"}' style="background-color: #87ceeb;"></div>
<div class="color-swatch"
data-colors='{"primary":"#3c003c","secondary":"#280028","accent":"#800
080","light":"#ba55d3"}' style="background-color: #800080;"></div>
<div class="color-swatch"
data-colors='{"primary":"#8b0000","secondary":"#660000","accent":"#ff0
000","light":"#ff6347"}' style="background-color: #ff0000;"></div>
</div>
</div>
<div class="settings-section">
<h4>Ecualizador</h4>
<div class="equalizer-controls">
<div class="eq-band">
<label for="eq-low">Bajos</label>
<input type="range" id="eq-low" min="-12"
max="12" value="0">
</div>
<div class="eq-band">
<label for="eq-mid">Medios</label>
<input type="range" id="eq-mid" min="-12"
max="12" value="0">
</div>
<div class="eq-band">
<label for="eq-high">Agudos</label>
<input type="range" id="eq-high" min="-12"
max="12" value="0">
</div>
</div>
</div>
</div>
</div>
<!-- Create Playlist Modal -->
<div id="create-playlist-modal" class="modal">
<div class="modal-content">
<button class="modal-close-btn"
id="create-playlist-close-btn">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5
6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19
6.41Z"/>
</svg>
</button>
<h3>Crear Nueva Playlist</h3>
<input type="text" id="new-playlist-name"
placeholder="Nombre de la playlist">
<button id="save-playlist-btn">Crear</button>
</div>
</div>
<!-- Add to Playlist Modal -->
<div id="add-to-playlist-modal" class="modal">
<div class="modal-content">
<button class="modal-close-btn"
id="add-to-playlist-close-btn">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M19 6.41L17.59 5L12 10.59L6.41 5L5
6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19
6.41Z"/>
</svg>
</button>
<h3>Añadir a Playlist</h3>
<ul id="playlist-add-list" class="modal-list">
<!-- Playlists will be rendered here -->
</ul>
</div>
</div>
<!-- Custom Message Box -->
<div id="message-box"></div>
<!-- Custom Confirmation Modal -->
<div id="confirm-modal" class="confirm-modal">
<div class="confirm-content">
<p id="confirm-message"></p>
<button id="confirm-yes"
class="create-btn">Sí</button>
<button id="confirm-no" class="create-btn">No</button>
</div>
</div>
<nav class="bottom-nav">
<button class="nav-btn active" data-screen="home-screen">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M12 5.69L17
10.19V18H15V12H9V18H7V10.19L12 5.69ZM12 3L2
12H5V20H11V14H13V20H19V12H22L12 3Z"/>
</svg>
<span>Inicio</span>
</button>
<button class="nav-btn" data-screen="playlists-screen">
<svg width="24" height="24" viewBox="0 0 24 24"
fill="currentColor">
<path d="M12 3C8.69 3 6 5.69 6 9L6.01 19.58C6.01
20.96 7.12 22.07 8.5 22.07H15.5C16.88 22.07 18 20.96 18 19.58V9C18
5.69 15.31 3 12 3ZM12 5C14.21 5 16 6.79 16 9V17H8V9C8 6.79 9.79 5 12
5ZM12 19.07C10.61 19.07 9.5 17.96 9.5 16.58V10H14.5V16.58C14.5 17.96
13.39 19.07 12 19.07Z"/>
</svg>
<span>Playlists</span>
</button>
</nav>
</div>
<input type="file" id="art-input" accept="image/*" style="display:
none;">
<input type="file" id="folder-input" webkitdirectory mozdirectory
directory style="display: none;">
<script>
document.addEventListener('DOMContentLoaded', () => {
const audio = new Audio();
let songs = [];
let currentSongIndex = -1;
let playlists =
JSON.parse(localStorage.getItem('luxonic_playlists')) || [];
let isPlaying = false;
let isPlaylistView = false;
let currentPlaylistId = null;
// ---- UI ELEMENTS ----
const playPauseBtn =
document.getElementById('play-pause-btn');
const playPauseIcon =
document.getElementById('play-pause-icon');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');
const albumArt = document.getElementById('current-cover');
const songTitle =
document.getElementById('current-song-title');
const songArtist =
document.getElementById('current-song-artist');
const progressBar =
document.getElementById('progress-bar');
const currentTimeEl =
document.getElementById('current-time');
const durationEl = document.getElementById('duration');
const screens = document.querySelectorAll('.screen');
const navButtons = document.querySelectorAll('.nav-btn');
const mainSongList =
document.getElementById('main-song-list');
const playlistsScreen =
document.getElementById('playlists-screen');
const playlistsList =
document.getElementById('playlists-list');
const createPlaylistBtn =
document.getElementById('create-playlist-btn');
const playlistViewScreen =
document.getElementById('playlist-view-screen');
const playlistViewTitle =
document.getElementById('playlist-view-title');
const playlistViewSongList =
document.getElementById('playlist-view-song-list');
const playlistViewBackBtn =
document.getElementById('playlist-view-back-btn');
const addSongsToPlaylistBtn =
document.getElementById('add-songs-to-playlist-btn');
const folderInput =
document.getElementById('folder-input');
const scanMusicBtn =
document.getElementById('scan-music-btn');
const searchModal =
document.getElementById('search-modal');
const searchBtn = document.getElementById('search-btn');
const searchCloseBtn =
document.getElementById('search-close-btn');
const searchInput =
document.getElementById('search-input');
const searchResultsList =
document.getElementById('search-results-list');
const settingsModal =
document.getElementById('settings-modal');
const settingsBtn =
document.getElementById('settings-btn');
const settingsCloseBtn =
document.getElementById('settings-close-btn');
const colorSwatches =
document.querySelectorAll('.color-swatch');
const eqLow = document.getElementById('eq-low');
const eqMid = document.getElementById('eq-mid');
const eqHigh = document.getElementById('eq-high');
const createPlaylistModal =
document.getElementById('create-playlist-modal');
const newPlaylistNameInput =
document.getElementById('new-playlist-name');
const savePlaylistBtn =
document.getElementById('save-playlist-btn');
const createPlaylistCloseBtn =
document.getElementById('create-playlist-close-btn');
const artInput = document.getElementById('art-input');
let songArtIndexToUpdate = -1;
const addToPlaylistModal =
document.getElementById('add-to-playlist-modal');
const addToPlaylistCloseBtn =
document.getElementById('add-to-playlist-close-btn');
const playlistAddList =
document.getElementById('playlist-add-list');
const messageBox = document.getElementById('message-box');
const confirmModal =
document.getElementById('confirm-modal');
const confirmMessage =
document.getElementById('confirm-message');
const confirmYesBtn =
document.getElementById('confirm-yes');
const confirmNoBtn =
document.getElementById('confirm-no');
// ---- AUDIO CONTEXT & EQUALIZER ----
let audioContext;
let source;
let lowGain, midGain, highGain;
function initAudioContext() {
if (!audioContext) {
audioContext = new (window.AudioContext ||
window.webkitAudioContext)();
source =
audioContext.createMediaElementSource(audio);
lowGain = audioContext.createBiquadFilter();
lowGain.type = 'lowshelf';
lowGain.frequency.value = 320;
midGain = audioContext.createBiquadFilter();
midGain.type = 'peaking';
midGain.frequency.value = 1000;
midGain.Q.value = 1;
highGain = audioContext.createBiquadFilter();
highGain.type = 'highshelf';
highGain.frequency.value = 3200;
source.connect(lowGain);
lowGain.connect(midGain);
midGain.connect(highGain);
highGain.connect(audioContext.destination);
eqLow.addEventListener('input', () =>
lowGain.gain.value = eqLow.value);
eqMid.addEventListener('input', () =>
midGain.gain.value = eqMid.value);
eqHigh.addEventListener('input', () =>
highGain.gain.value = eqHigh.value);
}
}
// ---- CORE PLAYER LOGIC ----
function playSong(index) {
if (index < 0 || index >= songs.length) {
return;
}
currentSongIndex = index;
const song = songs[currentSongIndex];
audio.src = song.url;
audio.play();
updatePlayerInfo();
isPlaying = true;
updatePlayPauseIcon();
highlightCurrentSong();
initAudioContext();
}
function playPause() {
if (audio.paused) {
if (audio.src) {
audio.play();
isPlaying = true;
}
} else {
audio.pause();
isPlaying = false;
}
updatePlayPauseIcon();
}
function nextSong() {
currentSongIndex = (currentSongIndex + 1) %
songs.length;
playSong(currentSongIndex);
}
function prevSong() {
currentSongIndex = (currentSongIndex - 1 +
songs.length) % songs.length;
playSong(currentSongIndex);
}
function updatePlayerInfo() {
if (currentSongIndex !== -1) {
const song = songs[currentSongIndex];
songTitle.textContent = song.title;
songArtist.textContent = song.artist;
albumArt.src = song.albumArt ||
'https://placehold.co/200x200/f06292/fff?text=Luxonic';
}
}
function updatePlayPauseIcon() {
if (isPlaying) {
playPauseIcon.innerHTML = `<path d="M14.016
5.016H18V18.984H14.016V5.016ZM6 5.016H10.016V18.984H6V5.016Z"/>`;
} else {
playPauseIcon.innerHTML = `<path d="M8 5V19L19
12L8 5Z"/>`;
}
}
function formatTime(seconds) {
const minutes = Math.floor(seconds / 60);
const remainingSeconds = Math.floor(seconds % 60);
return `${minutes}:${remainingSeconds < 10 ? '0' :
''}${remainingSeconds}`;
}
function highlightCurrentSong() {
document.querySelectorAll('.song-item').forEach(item
=> {
item.classList.remove('active');
const itemIndex = parseInt(item.dataset.index);
if (itemIndex === currentSongIndex) {
item.classList.add('active');
}
});
}
// ---- FILE MANAGEMENT ----
scanMusicBtn.addEventListener('click', () => {
folderInput.click();
});
folderInput.addEventListener('change', (event) => {
handleFiles(event.target.files);
hideModal(settingsModal);
showMessage('Escaneando archivos de música...');
});
async function handleFiles(files) {
for (const file of files) {
if (file.type.startsWith('audio/')) {
const newSong = {
title: file.name.split('.').slice(0,
-1).join('.'),
artist: 'Artista Desconocido',
url: URL.createObjectURL(file),
albumArt:
'https://placehold.co/200x200/f06292/fff?text=Luxonic',
file: file
};
songs.push(newSong);
}
}
renderSongs(songs, mainSongList);
if (songs.length > 0 && currentSongIndex === -1) {
playSong(0);
}
}
// ---- MESSAGE AND CONFIRMATION ----
function showMessage(msg) {
messageBox.textContent = msg;
messageBox.classList.add('show');
setTimeout(() => {
messageBox.classList.remove('show');
}, 3000);
}
function showConfirm(msg, onConfirm, onCancel) {
confirmMessage.textContent = msg;
confirmModal.classList.add('show');
const onYes = () => {
onConfirm();
confirmModal.classList.remove('show');
confirmYesBtn.removeEventListener('click', onYes);
confirmNoBtn.removeEventListener('click', onNo);
};
const onNo = () => {
if (onCancel) onCancel();
confirmModal.classList.remove('show');
confirmYesBtn.removeEventListener('click', onYes);
confirmNoBtn.removeEventListener('click', onNo);
};
confirmYesBtn.addEventListener('click', onYes);
confirmNoBtn.addEventListener('click', onNo);
}
// ---- RENDERING FUNCTIONS ----
function renderSongs(songList, container) {
container.innerHTML = '';
if (songList.length === 0) {
container.innerHTML = '<p style="text-align:
center; color: var(--text-secondary);">No hay canciones en esta
lista.</p>';
return;
}
songList.forEach((song, index) => {
const songItem = document.createElement('div');
songItem.classList.add('song-item');
songItem.dataset.index = index;
const img = document.createElement('img');
img.src = song.albumArt ||
'https://placehold.co/50x50/f06292/fff?text=♪';
const info = document.createElement('div');
info.classList.add('info');
info.innerHTML = `<div
class="title">${song.title}</div><div
class="artist">${song.artist}</div>`;
const actions = document.createElement('div');
actions.classList.add('actions');
const cameraBtn =
document.createElement('button');
cameraBtn.classList.add('camera-btn');
cameraBtn.title = "Cambiar portada";
cameraBtn.innerHTML = `<svg width="24" height="24"
viewBox="0 0 24 24" fill="currentColor">
<path d="M4 4H7L9 2H15L17
4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2
18V6C2 4.9 2.9 4 4 4ZM12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12
17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7ZM12 9C10.34 9 9 10.34 9
12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12
9Z"/>
</svg>`;
cameraBtn.addEventListener('click', (e) => {
e.stopPropagation();
songArtIndexToUpdate = index;
artInput.click();
});
songItem.appendChild(img);
songItem.appendChild(info);
songItem.appendChild(actions);
actions.appendChild(cameraBtn);
songItem.addEventListener('click', () => {
playSong(index);
});
container.appendChild(songItem);
});
highlightCurrentSong();
}
function renderPlaylists() {
playlistsList.innerHTML = '';
if (playlists.length === 0) {
playlistsList.innerHTML = '<p style="text-align:
center; color: var(--text-secondary);">No hay playlists creadas.</p>';
return;
}
playlists.forEach(playlist => {
const playlistItem =
document.createElement('div');
playlistItem.classList.add('playlist-item');
playlistItem.dataset.id = playlist.id;
const info = document.createElement('div');
info.classList.add('info');
info.innerHTML = `<div
class="title">${playlist.name}</div><div
class="count">${playlist.songs.length} canciones</div>`;
const actions = document.createElement('div');
actions.classList.add('actions');
const deleteBtn =
document.createElement('button');
deleteBtn.classList.add('action-btn');
deleteBtn.title = "Eliminar playlist";
deleteBtn.innerHTML = `<svg width="24" height="24"
viewBox="0 0 24 24" fill="currentColor">
<path d="M6 19C6 20.1 6.9
21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5
4H5V6H19V4Z"/>
</svg>`;
deleteBtn.addEventListener('click', (e) => {
e.stopPropagation();
showConfirm(`¿Estás seguro de que quieres
eliminar la playlist "${playlist.name}"?`, () => {
playlists = playlists.filter(p => p.id !==
playlist.id);
localStorage.setItem('luxonic_playlists',
JSON.stringify(playlists));
renderPlaylists();
});
});
playlistItem.appendChild(info);
playlistItem.appendChild(actions);
actions.appendChild(deleteBtn);
playlistItem.addEventListener('click', () => {
isPlaylistView = true;
currentPlaylistId = playlist.id;
const playlistSongs =
playlist.songs.map(songUrl => songs.find(s => s.url ===
songUrl)).filter(Boolean);
playlistViewTitle.textContent = playlist.name;
renderSongs(playlistSongs,
playlistViewSongList);
switchScreen('playlist-view-screen');
});
playlistsList.appendChild(playlistItem);
});
}
// ---- MODAL AND SCREEN MANAGEMENT ----
function switchScreen(screenId) {
screens.forEach(screen => {
screen.classList.add('hidden');
});
document.getElementById(screenId).classList.remove('hidden');
navButtons.forEach(btn =>
btn.classList.remove('active'));
if (screenId === 'home-screen' || screenId ===
'playlists-screen') {
document.querySelector(`.nav-btn[data-screen="${screenId}"]`).classLis
t.add('active');
isPlaylistView = false;
currentPlaylistId = null;
}
}
function showModal(modal) {
modal.classList.add('show');
}
function hideModal(modal) {
modal.classList.remove('show');
}
navButtons.forEach(btn => {
btn.addEventListener('click', () => {
switchScreen(btn.dataset.screen);
});
});
playlistViewBackBtn.addEventListener('click', () => {
switchScreen('playlists-screen');
});
searchBtn.addEventListener('click', () => {
showModal(searchModal);
});
searchCloseBtn.addEventListener('click', () => {
hideModal(searchModal);
searchInput.value = '';
searchResultsList.innerHTML = '<p style="text-align:
center; color: var(--text-secondary);">Empieza a escribir para
buscar.</p>';
});
settingsBtn.addEventListener('click', () => {
showModal(settingsModal);
});
settingsCloseBtn.addEventListener('click', () => {
hideModal(settingsModal);
});
// ---- SEARCH ----
searchInput.addEventListener('input', () => {
const query = searchInput.value.toLowerCase();
const filteredSongs = songs.filter(song =>
song.title.toLowerCase().includes(query) ||
song.artist.toLowerCase().includes(query)
);
renderSongs(filteredSongs, searchResultsList);
});
// ---- PLAYLISTS ----
createPlaylistBtn.addEventListener('click', () => {
showModal(createPlaylistModal);
});
createPlaylistCloseBtn.addEventListener('click', () => {
hideModal(createPlaylistModal);
newPlaylistNameInput.value = '';
});
savePlaylistBtn.addEventListener('click', () => {
const name = newPlaylistNameInput.value.trim();
if (name) {
playlists.push({
id: Date.now().toString(),
name: name,
songs: []
});
localStorage.setItem('luxonic_playlists',
JSON.stringify(playlists));
renderPlaylists();
showMessage(`Playlist "${name}" creada con
éxito.`);
hideModal(createPlaylistModal);
newPlaylistNameInput.value = '';
} else {
showMessage("El nombre de la playlist no puede
estar vacío.");
}
});
addSongsToPlaylistBtn.addEventListener('click', () => {
if (isPlaylistView) {
showAddToPlaylistModal();
}
});
function showAddToPlaylistModal(songIndex = null) {
playlistAddList.innerHTML = '';
playlists.forEach(playlist => {
const li = document.createElement('li');
li.textContent = playlist.name;
li.addEventListener('click', () => {
if (songIndex !== null) {
const songToAdd = songs[songIndex];
if (songToAdd &&
!playlist.songs.includes(songToAdd.url)) {
playlist.songs.push(songToAdd.url);
localStorage.setItem('luxonic_playlists', JSON.stringify(playlists));
showMessage(`Canción añadida a la
playlist "${playlist.name}"`);
hideModal(addToPlaylistModal);
} else {
showMessage(`La canción ya existe en
la playlist "${playlist.name}"`);
hideModal(addToPlaylistModal);
}
} else {
const currentPlaylist = playlists.find(p
=> p.id === currentPlaylistId);
const songsToAdd = songs.filter(s =>
!currentPlaylist.songs.includes(s.url));
songsToAdd.forEach(s => {
if (!playlist.songs.includes(s.url)) {
playlist.songs.push(s.url);
}
});
localStorage.setItem('luxonic_playlists',
JSON.stringify(playlists));
showMessage(`Canciones añadidas a la
playlist "${playlist.name}"`);
hideModal(addToPlaylistModal);
}
});
playlistAddList.appendChild(li);
});
if (playlists.length === 0) {
playlistAddList.innerHTML = '<p>No hay playlists.
Crea una primero.</p>';
}
showModal(addToPlaylistModal);
}
addToPlaylistCloseBtn.addEventListener('click', () => {
hideModal(addToPlaylistModal);
});
// ---- SETTINGS ----
colorSwatches.forEach(swatch => {
swatch.addEventListener('click', () => {
colorSwatches.forEach(s =>
s.classList.remove('active'));
swatch.classList.add('active');
const colors = JSON.parse(swatch.dataset.colors);
document.documentElement.style.setProperty('--primary-bg',
colors.primary);
document.documentElement.style.setProperty('--secondary-bg',
colors.secondary);
document.documentElement.style.setProperty('--accent-color',
colors.accent);
document.documentElement.style.setProperty('--light-accent',
colors.light);
});
});
artInput.addEventListener('change', (e) => {
const file = e.target.files[0];
if (file && songArtIndexToUpdate !== -1) {
const reader = new FileReader();
reader.onload = (event) => {
songs[songArtIndexToUpdate].albumArt =
event.target.result;
// Re-render the main song list to show the
new art
renderSongs(songs, mainSongList);
// If the currently playing song's art was
updated, update the main player's art too
if (currentSongIndex === songArtIndexToUpdate)
{
albumArt.src = event.target.result;
}
showMessage('Portada actualizada con éxito.');
songArtIndexToUpdate = -1;
};
reader.readAsDataURL(file);
}
});
// Initial state
renderPlaylists();
});
</script>
</body>
</html>